/* Copyright (c) 2013 Tyler Uebele * Released under the MIT license. * latest at https://github.com/tyleruebele/sort-table * minified at jscompress.com */
function sortTable(e,t){var n;sortTable.sortCol=-1;n=e.className.match(/js-sort-\d+/);if(null!=n){sortTable.sortCol=n[0].replace(/js-sort-/,"");e.className=e.className.replace(new RegExp(" ?"+n[0]+"\\b"),"")}sortTable.sortDir=1;n=e.className.match(/js-sort-(a|de)sc/);if(null!=n&&sortTable.sortCol==t){sortTable.sortDir="js-sort-asc"==n[0]?-1:1}e.className=e.className.replace(/ ?js-sort-(a|de)sc/g,"");e.className+=" js-sort-"+t;sortTable.sortCol=t;e.className+=" js-sort-"+(sortTable.sortDir==-1?"desc":"asc");n=e.tHead.rows[0].cells[t].className.match(/js-sort-[-\w]+/);if(null!=n){sortTable.sortFunc=n[0].replace(/js-sort-/,"")}else{sortTable.sortFunc="string"}var r=[],i=e.tBodies[0];for(var s=0;s<i.rows.length;s++){r[s]=i.rows[s]}r.sort(sortTable.compareRow);while(i.firstChild){i.removeChild(i.firstChild)}for(s=0;s<r.length;s++){i.appendChild(r[s])}}sortTable.compareRow=function(e,t){var n,r;if("function"!=typeof sortTable[sortTable.sortFunc]){sortTable.sortFunc="string"}n=sortTable[sortTable.sortFunc](e.cells[sortTable.sortCol]);r=sortTable[sortTable.sortFunc](t.cells[sortTable.sortCol]);return n==r?0:sortTable.sortDir*(n>r?1:-1)};sortTable.date=function(e){return new Date(e.innerHTML.replace(/<\/?[a-z]+\b[^>]*>/gi,""))};sortTable.number=function(e){return Number(e.innerHTML.replace(/<\/?[a-z]+\b[^>]*>/gi,"").replace(/\$|%|,/,""))};sortTable.string=function(e){return e.innerHTML.replace(/<\/?[a-z]+\b[^>]*>/gi,"").toLowerCase()};sortTable.last=function(e){return e.innerHTML.replace(/<\/?[a-z]+\b[^>]*>/gi,"").split(" ").pop().toLowerCase()};sortTable.input=function(e){for(var t=0;t<e.children.length;t++){if("object"==typeof e.children[t]&&"undefined"!=typeof e.children[t].value){return e.children[t].value.toLowerCase()}}return sortTable.string(e)};sortTable.init=function(){var e,t=document.querySelectorAll("table.js-sort-table");for(var n=0;n<t.length;n++){if(!t[n].tHead){e=document.createElement("thead");e.appendChild(t[n].rows[0]);t[n].insertBefore(e,t[n].children[0])}else{e=t[n].tHead}for(var r=0;r<e.rows[0].cells.length;r++){e.rows[0].cells[r].addEventListener("click",function(e,t){return function(){sortTable(e,t)}}(t[n],r))}}};window.addEventListener?window.addEventListener("load",sortTable.init,false):window.attachEvent&&window.attachEvent("onload",sortTable.init)
